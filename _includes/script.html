{%- assign vendor_js = '/assets/js/vendor' | relative_url -%}
{%- if page.collection == 'posts' or page.layout == 'post' -%}
  {%- include comments.html -%}

  {% if page.toc == true or page.table_of_content == true %}
    <script type="text/javascript" src="{{- vendor_js -}}/tocbot.min.js"></script>
    <script type="text/javascript">
      document.addEventListener('DOMContentLoaded', function () {
        tocbot.init({
          tocSelector: '#toc',
          contentSelector: '.content',
          ignoreSelector: '.no_toc',
          headingSelector: 'h2, h3, h4',
          orderedList: false,
          scrollSmooth: true,
          scrollSmoothOffset: -100,
        });
        tocbot.refresh();
      });
    </script>
    {%- if page.mermaid == true or page.diagram == true -%}
      <script type="text/javascript" src="{{- vendor_js -}}/mermaid.min.js"></script>
      <script type="text/javascript">
        document.addEventListener('DOMContentLoaded', () => {
          mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            securityLevel: 'loose',
          });
          let mermaidClass = document.getElementsByClassName('language-mermaid');
          Array.from(mermaidClass).forEach((element) => {
            element.classList.add('mermaid');
            mermaid.init(undefined, element);
          });
        });
      </script>
    {% endif %}
  {%- endif -%}
{%- endif -%}
