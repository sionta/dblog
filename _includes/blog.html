{%- if site.paginate -%}
  {%- assign posts = paginator.posts -%}
{%- else -%}
  {%- assign posts = site.posts -%}
{%- endif -%}

{%- assign date_format = site.date_format | default: '%B %d, %Y' -%}

{%- for post in posts -%}
  {%- assign post_image = post.image | default: post.banner | default: 'https://placehold.co/600x400/png' -%}
  <div class="blog-card alt">
    <div class="meta">
      <div class="image" style="background-image: url('{{ post_image | relative_url }}')"></div>
      <ul class="details">
        <li class="author">
          <a href="{{ site.author.url | default: post.url | relative_url }}">
            {{- site.author.name | default: post.author -}}
          </a>
        </li>
        <li class="date">{{ post.date | date: date_format }}</li>
        <li class="tags">
          <ul>
            {%- for tag in post.tags %}
              <li>
                <a href="{{ '/tags/' | append: tag | relative_url }}">{{- tag | capitalize -}}</a>
              </li>
            {% endfor -%}
          </ul>
        </li>
      </ul>
    </div>
    <div class="description">
      <h1>
        <a href="{{ post.url }}">{{ post.title }}</a>
      </h1>
      {% comment %} <h2>{{ post.summary | default: post.description }}</h2> {% endcomment %}
      <p class="post-summary">{{ post.content | strip_html | truncatewords: 20, '...' }}</p>
      <p class="read-more">
        <a href="{{ post.url }}">Read More</a>
      </p>
    </div>
  </div>
{%- endfor -%}

{%- comment -%}
  <div class="blog-card">
    <div class="meta">
      <div
        class="image"
        style="background-image: url(https://storage.googleapis.com/chydlx/codepen/blog-cards/image-2.jpg)"
      ></div>
      <ul class="details">
        <li class="author"><a href="#">Jane Doe</a></li>
        <li class="date">July. 15, 2015</li>
        <li class="tags">
          <ul>
            <li><a href="#">Learn</a></li>
            <li><a href="#">Code</a></li>
            <li><a href="#">JavaScript</a></li>
          </ul>
        </li>
      </ul>
    </div>
    <div class="description">
      <h1>Mastering the Language</h1>
      <h2>Java is not the same as JavaScript</h2>
      <p>
        Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ad eum dolorum architecto obcaecati enim dicta
        praesentium, quam nobis! Neque ad aliquam facilis numquam. Veritatis, sit.
      </p>
      <p class="read-more">
        <a href="#">Read More</a>
      </p>
    </div>
  </div>
{%- endcomment -%}
